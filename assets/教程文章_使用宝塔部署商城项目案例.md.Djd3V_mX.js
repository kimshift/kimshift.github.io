import{_ as a}from"./chunks/image-20210507175033900.DzseUZSJ.js";import{_ as e,q as l,p as i,aE as s}from"./chunks/framework.-H45_L2h.js";const t="/assets/H0caeddb00c0c4494b33e91f11ef559beH.C0yRXfXw.jpg",n="/assets/Hbc20bda65e1b4c328248aba3510a2baf2.BrviXAKE.jpg",o="/assets/H5dcd038945eb42d4b323097783bf63e7N.BuU8skKd.jpg",d="/assets/Hae4ce4d7dce14b3087212d212e7d7e750.CYtYNFh2.jpg",r="/assets/He732cfbb1e094a55b9d3483cd63f65caK.DqBD_zb0.jpg",c="/assets/Hc74fea5936b04f398ce95afc46769a11y.DsUyKhLu.jpg",p="/assets/H8d82e2bf6bbf4ac8921d08a9ada5b4bdT.BQPaIhWx.jpg",h="/assets/H9e820fb4eb4d4a39b6c3a86507a23079v.DjJ-W4yK.jpg",b="/assets/H1725f01ab8da427ba42ae9939ac8c7304.BzPQAJEX.jpg",_="/assets/He83b6507284c4a4e8ec8e9b6e44a786az.DwOtQiL3.jpg",u="/assets/Hde841ecd6a694e27bf779d89daedd697E.B8-6R6Jn.jpg",f="/assets/H775e831c0f7b45b987ebe5486944c10cP.BbZYEUj7.jpg",m="/assets/H3b86e66893034bc38306f9f899002278P.fFKN1RqZ.jpg",g="/assets/H07ac90a39e554a6bb6e30aa7ad2ddf37b.qsGfNeTl.jpg",E=JSON.parse('{"title":"宝塔部署商城项目案例","description":"","frontmatter":{"title":"宝塔部署商城项目案例","date":"2023-05-31T14:12:39.000Z","categories":["教程文章"],"tags":["宝塔","网站部署"],"showComment":false},"headers":[],"relativePath":"教程文章/使用宝塔部署商城项目案例.md","filePath":"教程文章/使用宝塔部署商城项目案例.md","lastUpdated":1723022138000}'),q={name:"教程文章/使用宝塔部署商城项目案例.md"},x=s('<h1 id="宝塔部署商城项目案例" tabindex="-1">宝塔部署商城项目案例 <a class="header-anchor" href="#宝塔部署商城项目案例" aria-label="Permalink to &quot;宝塔部署商城项目案例&quot;">​</a></h1><h2 id="部署前准备" tabindex="-1">部署前准备 <a class="header-anchor" href="#部署前准备" aria-label="Permalink to &quot;部署前准备&quot;">​</a></h2><h3 id="安装所需软件-服务" tabindex="-1">安装所需软件/服务 <a class="header-anchor" href="#安装所需软件-服务" aria-label="Permalink to &quot;安装所需软件/服务&quot;">​</a></h3><ul><li>MySQL 服务（ 5.7.34）</li><li>phpMyAdmin（5.1）</li><li>PM2 管理器（5.2）</li><li>Nginx（1.19.8)</li></ul><p><img src="'+t+'" alt="H0caeddb00c0c4494b33e91f11ef559beH" loading="lazy"></p><h3 id="创建数据库" tabindex="-1">创建数据库 <a class="header-anchor" href="#创建数据库" aria-label="Permalink to &quot;创建数据库&quot;">​</a></h3><ul><li>上传数据库脚本文件</li><li>在宝塔面板中创建相应的数据库</li><li>将数据库文件导入数据库中</li><li>数据库其余操作过程省略不讲（不是此次案例的重点内容）</li></ul><h3 id="解析域名" tabindex="-1">解析域名 <a class="header-anchor" href="#解析域名" aria-label="Permalink to &quot;解析域名&quot;">​</a></h3><ul><li>在购买的域名 DNS 解析管理进行二级域名解析</li><li>如果没有就不做这个步骤</li></ul><p><img src="'+n+'" alt="Hbc20bda65e1b4c328248aba3510a2baf2" loading="lazy"></p><h3 id="开放端口" tabindex="-1">开放端口 <a class="header-anchor" href="#开放端口" aria-label="Permalink to &quot;开放端口&quot;">​</a></h3><ul><li>开放该案例所需要的端口：80（前端）、3002（后端）</li><li>云服务器控制台开放所需要的端口</li><li>宝塔面板放行端口</li></ul><p><img src="'+o+'" alt="H5dcd038945eb42d4b323097783bf63e7N" loading="lazy"></p><h2 id="商城后端服务器项目部署" tabindex="-1">商城后端服务器项目部署 <a class="header-anchor" href="#商城后端服务器项目部署" aria-label="Permalink to &quot;商城后端服务器项目部署&quot;">​</a></h2><h3 id="打开宝塔面板首页" tabindex="-1">打开宝塔面板首页 <a class="header-anchor" href="#打开宝塔面板首页" aria-label="Permalink to &quot;打开宝塔面板首页&quot;">​</a></h3><h3 id="双击-pm2-管理器进入管理列表" tabindex="-1">双击 PM2 管理器进入管理列表 <a class="header-anchor" href="#双击-pm2-管理器进入管理列表" aria-label="Permalink to &quot;双击 PM2 管理器进入管理列表&quot;">​</a></h3><p><img src="'+a+'" alt="image-20210507175033900" loading="lazy"></p><h3 id="点击添加项目" tabindex="-1">点击添加项目 <a class="header-anchor" href="#点击添加项目" aria-label="Permalink to &quot;点击添加项目&quot;">​</a></h3><p><img src="'+d+'" alt="Hae4ce4d7dce14b3087212d212e7d7e750" loading="lazy"></p><h3 id="配置启动项目" tabindex="-1">配置启动项目 <a class="header-anchor" href="#配置启动项目" aria-label="Permalink to &quot;配置启动项目&quot;">​</a></h3><ul><li>启动文件：选择需要启动的文件或者输入脚本执行命令</li><li>运行目录：找到需要部署项目的根目录</li><li>项目名称：自定义即可</li></ul><p><img src="'+r+'" alt="He732cfbb1e094a55b9d3483cd63f65caK" loading="lazy"></p><h3 id="部署成功" tabindex="-1">部署成功 <a class="header-anchor" href="#部署成功" aria-label="Permalink to &quot;部署成功&quot;">​</a></h3><p><img src="'+c+'" alt="Hc74fea5936b04f398ce95afc46769a11y" loading="lazy"></p><h2 id="商城前端项目-dist-部署" tabindex="-1">商城前端项目(dist)部署 <a class="header-anchor" href="#商城前端项目-dist-部署" aria-label="Permalink to &quot;商城前端项目(dist)部署&quot;">​</a></h2><ul><li>将打包构建好的 dist 文件上传到云服务器/www/wwwroot/ 文件路径下</li><li>将文件夹重命名为：trading-platform（根据个人自定义操作）</li></ul><h3 id="进入网站管理-添加站点" tabindex="-1">进入网站管理-添加站点 <a class="header-anchor" href="#进入网站管理-添加站点" aria-label="Permalink to &quot;进入网站管理-添加站点&quot;">​</a></h3><h3 id="配置站点信息" tabindex="-1">配置站点信息 <a class="header-anchor" href="#配置站点信息" aria-label="Permalink to &quot;配置站点信息&quot;">​</a></h3><p><img src="'+p+'" alt="H8d82e2bf6bbf4ac8921d08a9ada5b4bdT" loading="lazy"></p><h3 id="创建站点成功" tabindex="-1">创建站点成功 <a class="header-anchor" href="#创建站点成功" aria-label="Permalink to &quot;创建站点成功&quot;">​</a></h3><p><img src="'+h+'" alt="H9e820fb4eb4d4a39b6c3a86507a23079v" loading="lazy"></p><ul><li>访问映射的域名：shop.kim-shift.cn 或者 www.shop.kim-shift.cn</li></ul><p><img src="'+b+'" alt="H1725f01ab8da427ba42ae9939ac8c7304" loading="lazy"></p><ul><li><p>由于刚部署的前端是有 vue 构建打包的，而在开发环境配置的代理在生产环境（build 构建的 dist）是不生效的</p></li><li><p>开发环境代理的访问地址均为 404</p></li></ul><p><img src="'+_+'" alt="He83b6507284c4a4e8ec8e9b6e44a786az" loading="lazy"></p><h2 id="nginx-反向代理配置" tabindex="-1">Nginx 反向代理配置 <a class="header-anchor" href="#nginx-反向代理配置" aria-label="Permalink to &quot;Nginx 反向代理配置&quot;">​</a></h2><p>使用 Nginx 代理来解决前端无法有效访问后端服务的问题，先部署好后端服务（不演示了），部署好后根据如下操作进行反向代理配置：</p><ul><li>进入宝塔-网站-对应的网站点击设置</li></ul><p><img src="'+u+'" alt="Hde841ecd6a694e27bf779d89daedd697E" loading="lazy"></p><ul><li><p>修改代理配置：新增在开发环境中对应的三个代理</p><ul><li>/api ==&gt;请求服务前缀接口</li><li>/carousel ==&gt;获取轮播图前缀接口</li><li>/uploads ==&gt;获取上传文件前缀接口</li></ul></li><li><p>创建反向代理</p><ul><li>开启高级功能</li><li>代理名称（可自定义）</li><li>代理目录：对应需要代理的接口路径</li><li>目标 URL：所要代理到的后端服务</li><li>发送域名：前端请求服务（默认即可）</li><li>/carousel 、/uploads 的代理配置与/api 的操作一致（已省略）</li></ul><p><img src="'+f+'" alt="H775e831c0f7b45b987ebe5486944c10cP" loading="lazy"></p></li><li><p>配置完成</p></li></ul><p><img src="'+m+`" alt="H3b86e66893034bc38306f9f899002278P" loading="lazy"></p><ul><li>分别点击这三个配置代理的配置文件进行修改（将这个部分删除掉）</li></ul><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>location  ~* \\.(gif|png|jpg|css|js|woff|woff2)$</span></span>
<span class="line"><span>{</span></span>
<span class="line"><span>    proxy_pass http://127.0.0.1:3002;</span></span>
<span class="line"><span>    proxy_set_header Host $host;</span></span>
<span class="line"><span>    proxy_set_header X-Real-IP $remote_addr;</span></span>
<span class="line"><span>    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span></span>
<span class="line"><span>    proxy_set_header REMOTE-HOST $remote_addr;</span></span>
<span class="line"><span>    expires 12h;</span></span>
<span class="line"><span>}</span></span></code></pre></div><h2 id="案例部署结束" tabindex="-1">案例部署结束 <a class="header-anchor" href="#案例部署结束" aria-label="Permalink to &quot;案例部署结束&quot;">​</a></h2><ul><li>访问网站：www.shop.kim-shift.cn</li></ul><p><img src="`+g+'" alt="H07ac90a39e554a6bb6e30aa7ad2ddf37b" loading="lazy"></p>',46),H=[x];function P(y,k,w,z,j,N){return i(),l("div",null,H)}const B=e(q,[["render",P]]);export{E as __pageData,B as default};
